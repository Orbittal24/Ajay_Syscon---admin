<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ajay Syscon | Live Temperature</title>
    <link rel="stylesheet" href="css/style.css" />

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/adminlte.min.css">


    <style>
        /* Reset default styles and set font family */
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }

        /* Full page container to hold the sidebar, topbar, and content */
        body {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: stretch;
            background-color: #adb2cc;
            
            /* Light background color from the logo */
            height: 100vh;
        }

        /* Topbar container styles */
        .topbar {
            display: flex;
            justify-content: flex-end;
            /* Align items to the right */
            align-items: center;
            /* background-color: #28292d; */
            /* Dark color from the logo */
            padding: 10px 20px;
            color: #45f3ff;
            /* Neon green color for text */
            width: 100%;
            position: fixed;
            /* Keeps the topbar fixed at the top */
            top: 0;
            left: 0;
            z-index: 1000;
        }

        /* Updated nav-item styles for smaller size and rounded border */
        .topbar .nav-item {
            cursor: pointer;
            font-size: 0.9rem;
            /* Slightly smaller font size */
            padding: 8px 15px;
            /* Reduced padding */
            background-color: black;
            border-radius: 15px;
            /* More rounded border */
            margin-left: 8px;
            /* Adjust spacing between buttons */
            transition: all 0.3s ease;
            color: #45f3ff;
            border: 1px solid transparent;
        }

        /* Glow effect on hover */
        .topbar .nav-item:hover {
            background-color: #45f3ff;
            color: #d9138a;
            border-color: #45f3ff;
            box-shadow: 0 0 15px #45f3ff, 0 0 30px #45f3ff, 0 0 45px #d9138a;
        }


        /* Main content wrapper */
        .main-content {
            display: flex;
            flex-direction: row;
            width: 100%;
            height: 100vh;
            /* Adjusted to fill the entire viewport height */
        }
  /* Sidebar container styles */
  .sidebar {
  /* background-color: #28292d; Dark color from the logo */
 
  /* background-color:  #393768;  */
  /* background-color:  #CCD538; */
  /* background-color:  #b4da4e; */
   /* background-color:  #c2e959; */
   background-color: #CCFF33;

   
   /* background-color:   #393768;  */




  width: 350px; /* Adjust the width of the sidebar if necessary */
  padding: 15px;
  display: flex;
  flex-direction: column;
  justify-content: center; /* Center the content vertically */
  align-items: center; /* Center the content horizontally */
  border-right: 2px solid #1c1c1c;
  position: fixed; /* Keeps the sidebar fixed */
  top: 0; /* Aligns the sidebar to the top of the viewport */
  left: 0; /* Aligns the sidebar to the left of the viewport */
  height: 100vh; /* Makes the sidebar full height */
  z-index: 1100; /* Ensures the sidebar appears above the topbar */
}

/* Sidebar brand logo styles */
/*  */
.brand-image {
  width: 250px; /* Adjust as needed */
  height: auto;
  display: block; /* Ensure it's visible */
  margin: 0 auto; /* Center the image */
}

        /* Content area for the shift assignment form */
        .content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* Main container styles */
        .box {
            position: relative;
            width: 900px;
            height: 530px;
            background: #1c1c1c;

            border-radius: 50px 5px;
            overflow: hidden;
            margin-top: 20px;
            border: 10px solid transparent;
            margin-left: 400px;
        }

        /* Form container styles */
        /* form {
      position: absolute;
      inset: 2px;
      background: #28292d;
      /* Dark color from the logo */
        /* border-radius: 50px 5px; */
        /* z-index: 10; */
        /* padding: 30px 30px; */
        /* display: flex; */
        /* flex-direction: column; */
        /* } */


        #shiftForm {
            position: absolute;
            inset: 2px;
            background: #28292d;
            /* Dark color from the logo */
            border-radius: 50px 5px;
            z-index: 10;
            padding: 30px 30px;
            display: flex;
            flex-direction: column;
        }


        /* Title styles */
        .title h3 {
            color: #45f3ff;
            /* Neon green color for contrast */
            text-align: center;
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        /* Input box styles */
        .input-box {
            width: 100%;
            margin-top: 20px;
        }

        .input-box input {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            outline: none;
            border-radius: 15px;
            padding: 10px 20px;
            font-size: 1rem;
            margin: 10px 0;
            color: white;
        }

        .input-box input::placeholder {
            color: #cdd1d2;
        }

        /* Submit button styles */
        .input-box input[type="submit"] {
            background-color: #45f3ff;
            cursor: pointer;
            color: #16100e;
            filter: drop-shadow(0 5px 10px #45f3ff);
            margin-bottom: 10px;
        }

        .label-color {
            color: white;
            /* Set text color to white */
        }



        /* Create animated gradient border effect */
        .box::before,
        .box::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 95%;
            height: 450px;
            background: linear-gradient(60deg, transparent, #45f3ff, #45f3ff);
            transform-origin: bottom right;
            animation: animate 9s linear infinite;
        }

        .box::after {
            background: linear-gradient(60deg, transparent, #d9138a, #d9138a);
            animation-delay: -3s;
        }

        /* Keyframes for gradient animation */
        @keyframes animate {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }


        .temp-display {
            font-size: 60px;
            color: black;
        }

        .display-box {
            font-size: 35px;
            /* font-weight: bold; */
            margin-top: 8px;
            color: white;
            text-align: center;
            justify-content: center;
        }

        .display-box_temp {
            font-size: 70px;
            margin-left: 10px;
            font-weight: bold;
            text-align: center;
        }

        /* For the first element if you want a larger margin */
        #tempDisplay {
            margin-top: 10px;
        }

        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            /* Two equal columns */
            gap: 10px;
            /* Space between items */
            padding: 20px;
            margin-left: 20px;
        }

        .grid-item {
            display: flex;
            flex-direction: column;
        }

        .grid-item label {
            /* margin-bottom: 5px; */
            font-weight: bold;
            color: #45f3ff;
            /* Neon color for labels */
        }

        .grid-item input,
        .grid-item textarea {
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            border-bottom: 2px solid #45f3ff;
            padding: 10px;
            font-size: 1rem;
            color: white;
            outline: none;
            width: 350px;
            height: 35px;
            /* Slightly taller input fields */
            border-radius: 10px;
            box-sizing: border-box;

        }

        .grid-item input:focus,
        .grid-item textarea:focus {
            border-bottom: 2px solid #d9138a;
        }


        #address {
            resize: vertical;
            /* Allow vertical resizing */
            overflow-y: auto;
            /* Show scroll only when needed */
            min-height: 40px;
            /* Minimum height */
            max-height: 100px;
            /* Limit the height */
        }

        .button-container {
            grid-column: span 2;
            /* Make the button span both columns */
            display: flex;
            justify-content: center;
            /* margin-top: 5px; */
        }

        .button-container2 {
            grid-column: span 1;
            /* display: flex; */
            /* justify-content: center; */
        }


        /* Glowing effect for submit button */
        .button-container input[type="button"] {
            background-color: #45f3ff;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            color: #16100e;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px #45f3ff;
        }

        /* Glow effect on hover */
        .button-container input[type="button"]:hover {
            background-color: #d9138a;
            box-shadow: 0 0 20px #d9138a, 0 0 40px #d9138a;
        }


        #address {
            padding: 10px;
            width: 94%;
            height: 35px;
            /* Adjust height */
            resize: none;
            /* Prevent resizing if unnecessary */
            overflow-y: scroll;
            /* Show vertical scrollbar */
            border-radius: 15px;
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            border-bottom: 2px solid #45f3ff;
            color: white;
            font-size: 1rem;
            outline: none;
        }

        /* Customize the scrollbar for the textarea */
        #address::-webkit-scrollbar {
            width: 8px;
            /* Width of the scrollbar */
        }

        #address::-webkit-scrollbar-track {
            background: #28292d;
            /* Track color */
            border-radius: 10px;
        }

        #address::-webkit-scrollbar-thumb {
            background-color: #45f3ff;
            /* Scrollbar color */
            border-radius: 10px;
            border: 2px solid #28292d;
            /* Creates some space around the thumb */
        }

        #address::-webkit-scrollbar-thumb:hover {
            background-color: #d9138a;
            /* Change color on hover */
        }
        #license-key {
    width: 70%; /* Adjust the width if necessary */
}

#activate-key {
    padding: 10px 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    background-color: #45f3ff;
    border: none;
    border-radius: 10px;
    box-shadow: 0 0 10px #45f3ff;
}

#activate-key:hover {
    background-color: #d9138a;
    box-shadow: 0 0 20px #d9138a, 0 0 40px #d9138a;
}

    </style>

</head>

<body>
    <!-- Topbar section -->
    <div class="topbar">
        <div class="nav-item" id="backButton">Back</div>
        <div class="nav-item" id="ReportButton">Reports</div>
        <div class="nav-item" id="colorgraph">Graph</div>

        <div class="nav-item" id="liveButton">Live Temperature</div>
        <div class="nav-item" id="homeButton">Home</div>
        <div class="nav-item" id="logoutButton">Logout</div>
    </div>

    <!-- Main content wrapper -->
    <div class="main-content">
        <!-- Sidebar section -->
        <!-- <div class="sidebar">
            <img src="../../dist/img/Ajay_Syscon_Logo.jpg" alt="Logo" class="brand-image" />
        </div> -->
        <div class="sidebar">
            <!-- <img src="../../dist/img/Ajay_Syscon_Logo_transparent.png" alt="Logo" class="brand-image" /> -->
            <img src="dist/img/Ajay_Syscon_Logo_transparent.png" alt="Logo" class="brand-image" />
            
            <!-- Website link below the logo -->
            <a href="https://www.ajaysyscon.com/" target="_blank" class="website-link">
              www.ajaysyscon.com
            </a>
          </div>

        <div class="content">
            <div class="box license-info-box">
                <div id="shiftForm">
                    <div class="grid-item">
                        <div class="button-input-container" style="justify-content: center; gap: 2px; width: 30%; margin-left: 300px;">
                            <div class="button-container" style="display: flex; gap: 10px;">
                                <input type="button" value="30 Days Trial Key" id="key-30days">
                                <input type="button" value="1 Year Trial Key" id="key-1year">
                                <input type="button" value="2 Years Trial Key" id="key-2years">
                                <input type="text" id="generated-key" value="Generated License Key"  style="width: 200px;">
                            </div>
                        </div>
                    </div>
                    <br>
                   
                    <div class="grid-item">
                        <div class="button-input-container" style="justify-content: center; gap: 2px; width: 30%; margin-left: 180px;">
                            <div class="button-container" style="display: flex; gap: 10px;">
                                <input type="text" id="license-key" value="Enter License Key"  style="width: 200px;">
                                <input type="button" value="Activate" id="activate-key">
                            </div>
                        </div>
                    </div>

                    <div class="grid-container license-grid">
                        <div class="grid-item">
                            <label class="label-color" for="first-date">First Entry Date:</label>
                            <input type="text" id="first-date" value="28/10/2024" />
                        </div>
                        <div class="grid-item"  style="display: none;">
                            <label class="label-color" for="current-date">Current Entry Date:</label>
                            <input type="text" id="current-date" value="26/12/2024" />
                        </div>
                        <div class="grid-item">
                            <label class="label-color" for="license-name">License Name:</label>
                            <input type="text" id="license-name" value="1-year-qig0nj4j" />
                        </div>
                        <div class="grid-item">
                            <label class="label-color" for="status-license">Status License:</label>
                            <input type="text" id="status-license" value="active" />
                        </div>
                        <!-- <div class="grid-item">
                            <label class="label-color" for="license-name">License Name:</label>
                            <input type="text" id="license-name" value="1-year-qig0nj4j" />
                        </div> -->
                        <div class="grid-item">
                            <label class="label-color" for="days-used">Days Used:</label>
                            <input type="text" id="days-used" value="62" />
                        </div>
                        <div class="grid-item">
                            <label class="label-color" for="valid-days">Valid Days:</label>
                            <input type="text" id="valid-days" value="365" />
                        </div>
                        <!-- <div class="grid-item">
                            <label class="label-color" for="days-used">Days Used:</label>
                            <input type="text" id="days-used" value="62" />
                        </div> -->
                        <div class="grid-item">
                            <label class="label-color" for="expiry-date">Expiry Date:</label>
                            <input type="text" id="expiry-date" value="28/10/2025" />
                        </div>
                        <div class="grid-item">
                            <label class="label-color" for="days-remaining">Days Remaining:</label>
                            <input type="text" id="days-remaining" value="303" />
                        </div>
                        <!-- <div class="grid-item">
                            <label class="label-color" for="expiry-date">Expiry Date:</label>
                            <input type="text" id="expiry-date" value="28/10/2025" />
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- jQuery -->
    <script src="../../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/adminlte.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        document.getElementById('backButton').addEventListener('click', function () {
            window.history.back();
        });

        document.getElementById('ReportButton').addEventListener('click', function () {
            window.location.href = 'report.html';
        });
        document.getElementById('colorgraph').addEventListener('click', () => {
            window.location.href = 'colorgraph.html';
        });
        document.getElementById('liveButton').addEventListener('click', function () {
            window.location.href = 'live_temp.html';
        });
        document.getElementById('homeButton').addEventListener('click', function () {
            window.location.href = 'index.html';
        });
        document.getElementById('logoutButton').addEventListener('click', function() {
          window.location.href = 'login.html';
        });

        // document.getElementById('adminButton').addEventListener('click', function() {
        //   window.location.href = 'adminview.html';
        // });

        // document.getElementById('companyButton').addEventListener('click', function() {
        //   window.location.href = 'companydashboard.html';
        // });

        const socket = io();

        // ////////////////////////////////////linsence expire swal start///////////////////////////////////


        // Listen for the 'licenseInactive' event
        socket.on('licenseInactive', (message) => {

            // Trigger SweetAlert notification
            Swal.fire({
                icon: 'error',
                title: 'License Issue',
                text: message,
                footer: 'Please contact support to resolve the issue.'
            });
        });






    document.addEventListener('DOMContentLoaded', () => {

        // Admin Section - Generate Keys
        document.getElementById('key-30days').onclick = () => generateAndSendKey('30-days');
        document.getElementById('key-1year').onclick = () => generateAndSendKey('1-year');
        document.getElementById('key-2years').onclick = () => generateAndSendKey('2-years');

        function generateAndSendKey(licenseType) {
            socket.emit('generateKey', licenseType);
        }

        socket.on('keyGenerated', (key) => {
            document.getElementById('generated-key').value = key;
        });

        // Format date as DD/MM/YYYY
        const formatDate = (dateString) => {
            const date = new Date(dateString);
            return `${String(date.getDate()).padStart(2, '0')}/` +
                   `${String(date.getMonth() + 1).padStart(2, '0')}/` +
                   `${date.getFullYear()}`;
        };

        // Display the license data on the UI
        const displayData = (data) => {
    document.getElementById('license-key').value = data.License_Name || '';
    document.getElementById('first-date').value = formatDate(data.First_Entry_Date);
    document.getElementById('current-date').value = formatDate(data.Current_Entry_Date);
    document.getElementById('status-license').value = data.Status_License;
    document.getElementById('license-name').value = data.License_Name;
    document.getElementById('valid-days').value = data.Valid_Days;
    document.getElementById('days-used').value = data.Days_Used;
    document.getElementById('days-remaining').value = data.Days_Remaining;
    document.getElementById('expiry-date').value = formatDate(data.Expiry_Date);
};

        // Load saved license data from localStorage (if it exists)
        const savedData = JSON.parse(localStorage.getItem('licenseData'));
        if (savedData) {
            displayData(savedData);
        }

        // Activate the license when the user clicks the button
        document.getElementById('activate-key').onclick = () => {
            const key = document.getElementById('license-key').value;
            socket.emit('activateKey', key);
        };

        // Listen for license data from the server and update the UI
        socket.on('licenseData', (data) => {
            if (data.error) {
                alert(`Error: ${data.error}`);
                return;
            }

            localStorage.setItem('licenseData', JSON.stringify(data));
            displayData(data); // Update the UI with the received data
        });

        // Listen for date updates from the server and update the current date on the UI
        socket.on('dateUpdated', (data) => {
            document.getElementById('current-date').textContent = formatDate(data.latestDate);
        });
    });
</script>


</body>

</html>